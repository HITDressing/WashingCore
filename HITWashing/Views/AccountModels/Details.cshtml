@model HITWashing.Models.DBClass.AccountModel

@{
    ViewData["Title"] = Model.StoreName;
    ViewData["SubTitle"] = Model.Address;

    var user_ware = Model.Warehouses.FirstOrDefault(x => x.AccountName == Model.AccountName);
    var user_balance = Model.Balances.FirstOrDefault(x => x.AccountName == Model.AccountName);
}

<div class="jumbotron" style="background-color: lightsteelblue">
    <h2 style="color:white">@ViewData["Title"]</h2>
    <h4>
        <span class="label label-default">@ViewData["SubTitle"]</span>
    </h4>
    <h4>
        @if (user_ware == null)
        {
            <span class="label label-warning">该用户尚未有任何库存信息 请至少完成1个订单</span>
        }
        else
        {
            <span class="btn btn-success">枕头 <span class="badge">@user_ware.ItemNum_1</span></span>
            <span class="btn btn-info">枕巾 <span class="badge">@user_ware.ItemNum_2</span></span>
            <span class="btn btn-warning">浴巾 <span class="badge">@user_ware.ItemNum_3</span></span>
        }
    </h4><h4>

        @if (user_balance == null)
        {
            <span class="label label-warning">该用户尚未有任何余额信息 请联系管理员进行初始化</span>
        }
        else
        {
            <span class="btn btn-danger">余额 <span class="badge">@user_balance.Balance</span></span>
        }
    </h4>
</div>

<div>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">借订单历史</a></li>
        <li role="presentation"><a href="#forum" aria-controls="forum" role="tab" data-toggle="tab">还订单历史</a></li>
    </ul>
    <div class="tab-content">


        <div role="tabpanel" class="tab-pane fade in active" id="messages">
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            配送人员
                        </th>
                        <th>
                            物品1
                        </th>
                        <th>
                            物品2
                        </th>
                        <th>
                            物品3
                        </th>
                        <th>
                            是否取消
                        </th>
                        <th>
                            是否完成
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.BorrowTransport.Where(x=>x.IsCanceled||x.IsCompleted))
                    {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.UserID)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_1)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_2)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_3)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IsCanceled)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IsCompleted)
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="forum">

            <table class="table">
                <thead>
                    <tr>
                        <th>
                            配送人员
                        </th>
                        <th>
                            物品1
                        </th>
                        <th>
                            物品2
                        </th>
                        <th>
                            物品3
                        </th>
                        <th>
                            是否取消
                        </th>
                        <th>
                            是否完成
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.PaybackTransport.Where(x => x.IsCanceled || x.IsCompleted))
            {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.UserName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_1)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_2)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemNum_3)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IsCanceled)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.IsCompleted)
                        </td>
                    </tr>
    }
                </tbody>
            </table>

        </div>

    </div>

</div>
